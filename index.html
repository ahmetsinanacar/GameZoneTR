<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameZoneTR</title>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:0;background:#111;color:#fff;}
header,footer{text-align:center;padding:10px;background:#222;}
h1,h2,h3{margin:5px 0;}
.games-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;padding:20px;}
.game-card{background:#222;padding:10px;border-radius:8px;transition:transform 0.3s;}
.game-card:hover{transform:scale(1.05);}
.game-card img{width:100%;border-radius:5px;}
.btn{display:inline-block;padding:8px 15px;margin-top:10px;background:#f90;color:#111;text-decoration:none;border-radius:5px;transition:0.3s;}
.btn:hover{background:#ff0;}
.filters{text-align:center;padding:10px;}
.filter-btn{padding:5px 10px;margin:0 5px;background:#333;color:#fff;border:none;border-radius:4px;cursor:pointer;}
.filter-btn:hover{background:#555;}
#hero-slider{position:relative;overflow:hidden;height:300px;}
#hero-slider .slide{position:absolute;opacity:0;transition:opacity 0.5s;width:100%;height:100%;}
#hero-slider .slide.active{opacity:1;}
.slide-text{position:absolute;bottom:20px;left:20px;background:rgba(0,0,0,0.5);padding:10px;border-radius:5px;}
#card-container{margin:15px 0;}
</style>
</head>
<body>
<header><h1>GameZoneTR</h1></header>

<!-- Slider -->
<section id="hero-slider">
  <div class="slide active">
    <img src="https://via.placeholder.com/800x300" alt="The Last of Us Part 1" style="width:100%;height:100%;object-fit:cover;">
    <div class="slide-text">
      <h2>The Last of Us Part 1</h2>
      <p>PC versiyonu şimdi satın al!</p>
      <a class="btn" href="#games">Satın Al</a>
    </div>
  </div>
  <div class="slide">
    <img src="https://via.placeholder.com/800x300" alt="The Last of Us Part 2" style="width:100%;height:100%;object-fit:cover;">
    <div class="slide-text">
      <h2>The Last of Us Part 2</h2>
      <p>PC ve Mobile sürümü</p>
      <a class="btn" href="#games">Satın Al</a>
    </div>
  </div>
</section>

<!-- Filtreleme -->
<section class="filters">
  <button class="filter-btn" data-cat="All">Tümü</button>
  <button class="filter-btn" data-cat="PC">PC</button>
  <button class="filter-btn" data-cat="Mobile">Mobile</button>
</section>

<!-- Ürün Kartları -->
<section class="games-grid" id="games"></section>

<!-- Ödeme bölümü -->
<section id="payment-section">
  <h3>Hemen Satın Al</h3>
  <div id="card-container"></div>
  <button id="card-button">Ödemeyi Tamamla ve ZIP İndir</button>
  <div id="payment-status-container"></div>
</section>

<footer><p>GameZoneTR 2025</p></footer>

<script type="text/javascript" src="https://sandbox.web.squarecdn.com/v1/square.js"></script>
<script>
// Oyun verileri
const PRODUCTS=[
  {id:'thelastofus1',title:'The Last of Us Part 1',short:'PC versiyonu — Joel ve Ellie’nin macerası.',price:'₺1.700',category:'PC',zip:'games/thelastofus1.zip'},
  {id:'thelastofus2_pc',title:'The Last of Us Part 2',short:'PC versiyonu — Ellie ve Abby’nin macerası.',price:'₺1.400',category:'PC',zip:'games/thelastofus2.zip'},
  {id:'thelastofus1_mobile',title:'The Last of Us Part 1',short:'Mobil versiyon — Joel ve Ellie’nin macerası.',price:'₺899',category:'Mobile',zip:'games/thelastofus1.zip'},
  {id:'thelastofus2_mobile',title:'The Last of Us Part 2',short:'Mobil versiyon — Ellie ve Abby’nin macerası.',price:'₺699',category:'Mobile',zip:'games/thelastofus2.zip'}
];

// Slider
const slides=document.querySelectorAll('#hero-slider .slide');
let currentSlide=0;
function showSlide(index){slides.forEach((s,i)=>s.classList.toggle('active',i===index))}
function nextSlide(){currentSlide=(currentSlide+1)%slides.length;showSlide(currentSlide)}
setInterval(nextSlide,5000);

// Ürün kartları
const container=document.querySelector('.games-grid');
function displayProducts(filteredProducts){
  container.innerHTML='';
  filteredProducts.forEach(p=>{
    const card=document.createElement('article');
    card.className='game-card';
    card.innerHTML=`<img src="https://via.placeholder.com/250x150" alt="${p.title}"><h3>${p.title}</h3><p>${p.short}</p><div class="price">${p.price}</div><a class="btn" href="#" data-id="${p.id}">Satın Al / ZIP İndir</a>`;
    container.appendChild(card);
  });
}
displayProducts(PRODUCTS);

// Filtreleme
document.querySelectorAll('.filter-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const cat=btn.getAttribute('data-cat');
    displayProducts(cat==='All'?PRODUCTS:PRODUCTS.filter(p=>p.category===cat));
  });
});

// Square ödeme
const payments=Square.payments('sq0idp-mvDYZgtVxV19czwV7HTQUA','sandbox');
let card;
async function initializeCard(){
  card=await payments.card();
  await card.attach('#card-container');
}
async function handlePayment(productId){
  const result=await card.tokenize();
  if(result.status==='OK'){
    alert('Ödeme başarılı! ZIP dosyası indirilecek: '+productId);
  }else{
    alert('Ödeme hatası: '+result.errors[0].message);
  }
}
initializeCard();

// Kartı seçip ödeme butonuna tıkla
document.getElementById('card-button').addEventListener('click',()=>{
  const productId=PRODUCTS[0].id;
  handlePayment(productId);
});

// Ürün kartı butonları Square ödeme ile ZIP indirme mantığı
document.querySelector('.games-grid').addEventListener('click',e=>{
  if(e.target.matches('.btn')){
    e.preventDefault();
    const pid=e.target.getAttribute('data-id');
    handlePayment(pid);
  }
});
</script>
</body>
</html>
